{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/yagni/Desktop/my-blog-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/yagni/Desktop/my-blog-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/yagni/Desktop/my-blog-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./setting.css\";import Sidebar from\"../../comp/sidebar/Sidebar\";import{useContext,useState}from\"react\";import{Context}from\"../../context/Context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Setting(){var _useContext=useContext(Context),user=_useContext.user,dispatch=_useContext.dispatch;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),succ=_useState10[0],setSucc=_useState10[1];var PF=\"http://localhost:5000/images/\";var handlesubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updateduser,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"UPDATE_START\"});updateduser={userid:user._id,username:username,email:email,password:password};if(!file){_context.next=16;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);updateduser.profilepic=filename;_context.prev=9;_context.next=12;return axios.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axios.put(\"/user/\"+user._id,updateduser);case 19:res=_context.sent;setSucc(true);dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});_context.next=27;break;case 24:_context.prev=24;_context.t1=_context[\"catch\"](16);dispatch({type:\"UPDATE_FAILURE\"});case 27:case\"end\":return _context.stop();}}},_callee,null,[[9,14],[16,24]]);}));return function handlesubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"setting\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingwrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingtitle\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"settingupdate\",children:\"Update your Account\"}),/*#__PURE__*/_jsx(\"span\",{className:\"settingdelete\",children:\"Delete your Account\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"settingform\",onSubmit:handlesubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"settingpp\",children:[/*#__PURE__*/_jsx(\"img\",{src:file?URL.createObjectURL(file):PF+user.profilepic,alt:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileinput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"settingprofileicon fa-regular fa-circle-user\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileinput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"label\",{children:\" Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\" Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:user.email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\" password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"settingsubmit\",type:\"submit\",children:\"Update\"}),succ&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\",textAlign:\"center\",marginTop:\"20px\"},children:\"Profile has been updated....\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{})]});}","map":{"version":3,"names":["Sidebar","useContext","useState","Context","axios","Setting","user","dispatch","file","setFile","username","setUsername","email","setEmail","password","setPassword","succ","setSucc","PF","handlesubmit","e","preventDefault","type","updateduser","userid","_id","data","FormData","filename","Date","now","name","append","profilepic","post","put","res","payload","URL","createObjectURL","display","target","files","value","color","textAlign","marginTop"],"sources":["C:/Users/yagni/Desktop/my-blog-app/client/src/pages/setting/Setting.jsx"],"sourcesContent":["import \"./setting.css\"\r\nimport Sidebar from \"../../comp/sidebar/Sidebar\"\r\nimport { useContext, useState } from \"react\"\r\nimport { Context } from \"../../context/Context\"\r\nimport axios from \"axios\"\r\n\r\n\r\n\r\nexport default function Setting() {\r\n    const {user,dispatch} = useContext(Context)\r\n    const [file,setFile] = useState(null);\r\n    const [username,setUsername] = useState(\"\");\r\n    const [email,setEmail] = useState(\"\");\r\n    const [password,setPassword] = useState(\"\");\r\n    const [ succ,setSucc]=useState(false);\r\n    const PF = \"http://localhost:5000/images/\"\r\n\r\n    const handlesubmit= async (e)=>{\r\n        e.preventDefault();\r\n        dispatch({type:\"UPDATE_START\"})\r\n        const updateduser={\r\n          userid: user._id,\r\n          username,\r\n          email,\r\n          password\r\n        };\r\n        if(file){\r\n          const data=new FormData();\r\n          const filename=Date.now()+file.name;\r\n          data.append(\"name\",filename)\r\n          data.append(\"file\",file)\r\n          updateduser.profilepic=filename\r\n          try{\r\n            await axios.post(\"/upload\",data);\r\n          }catch(err){\r\n            \r\n          }\r\n        }\r\n        try{\r\n          const res= await axios.put(\"/user/\"+user._id,updateduser)\r\n          setSucc(true);\r\n          dispatch({type:\"UPDATE_SUCCESS\",payload:res.data})\r\n        }catch(err){\r\n            dispatch({type:\"UPDATE_FAILURE\"})\r\n        }\r\n      }\r\n  return (\r\n    <div className='setting'>\r\n        <div className=\"settingwrap\">\r\n            <div className=\"settingtitle\">\r\n                <span className=\"settingupdate\">Update your Account</span>\r\n                <span className=\"settingdelete\">Delete your Account</span>\r\n            </div>\r\n            <form className=\"settingform\" onSubmit={handlesubmit}>\r\n                <label>Profile Picture</label>\r\n                <div className=\"settingpp\">\r\n                    <img src={file? URL.createObjectURL(file): PF+user.profilepic} alt=\"\" />\r\n                    <label htmlFor=\"fileinput\">\r\n                    <i className=\"settingprofileicon fa-regular fa-circle-user\"></i>\r\n                    </label>\r\n                    <input type=\"file\" id=\"fileinput\" style={{display:\"none\"}} onChange={e=>setFile(e.target.files[0])}/>\r\n                                                  \r\n                </div>\r\n                <label> Username</label>\r\n                <input type=\"text\" placeholder={user.username} onChange={e=>setUsername(e.target.value)}/>\r\n                <label> Email</label>\r\n                <input type=\"email\" placeholder={user.email} onChange={e=>setEmail(e.target.value)}/>\r\n                <label> password</label>\r\n                <input type=\"password\"  onChange={e=>setPassword(e.target.value)}/>\r\n                <button className=\"settingsubmit\" type=\"submit\">Update</button>\r\n                {\r\n                    succ && <span style={{color:\"green\",textAlign:\"center\",marginTop:\"20px\"}}>Profile has been updated....</span>\r\n                }\r\n            </form>\r\n        </div>\r\n        <Sidebar/>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}